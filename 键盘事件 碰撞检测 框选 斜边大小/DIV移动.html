<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
		<style>
			div {
				width: 100px;
				height: 100px;
				background: red;
				position: absolute;
				left: 0;
				top: 0;
			}
		</style>
		<script>
			// 使用键盘会触发键盘事件
			/*
					onkeydown
						按下键盘任意键触发 
						按下不松开，会一直触发
					onkeyup
						释放键盘上键时触发

					ev.keyCode
						键盘上键对应的的编码

			*/
		</script>
	</head>

	<body>
		<div id="box"></div>
		<script>

		var oldTime = 0;
		var timer = null;
		var right = false;
		var bottom = false;
		var left = false
		var top1 = false
		/*
			{
				39  true/false
				40  true/false
				37
				38
			}
		*/
		
		document.onkeydown = function (ev){
			if(ev.keyCode === 39){
				right = true;
				console.log(right)
			}
			if(ev.keyCode === 40){
				bottom = true;
				console.log(bottom)
			}
			if(ev.keyCode === 37){
				left = true;
				console.log(left)
			}
			if(ev.keyCode === 38){
				top1 = true;
				console.log(top1)
			}
			if( timer ){
				return
			}
			
		}

		document.onkeyup = function (ev){
			
			if(ev.keyCode === 39){
				right = false;
			}
			if(ev.keyCode === 40){
				bottom = false;
			}
			if(ev.keyCode === 37){
				left = false;
			}
			if(ev.keyCode === 38){
				top1 = false;
			}
		};


		timer = setInterval(function (){
			console.log('走');
			if(right){  // 右
				box.style.left = box.offsetLeft + 3 + 'px';
			}

			if(bottom){
				box.style.top = box.offsetTop + 3 + 'px';
			}
			if(left){
				box.style.left = box.offsetLeft - 3 + 'px';
			}
			if(top1){
				box.style.top = box.offsetTop - 3 + 'px';
			}
		},30)
		
		</script>
	</body>
</html>